{"version":3,"sources":["../../../../../../../build/webpack/config/blocks/css/loaders/global.ts"],"names":["getGlobalCssLoader","ctx","postCssPlugins","preProcessors","loaders","isClient","push","isDevelopment","assetPrefix","loader","require","resolve","options","importLoaders","length","sourceMap","ident","plugins","slice","reverse"],"mappings":"mFAGA,gCAEO,QAASA,CAAAA,kBAAT,CACLC,GADK,CAELC,cAFK,CAGLC,aAAgD,CAAG,EAH9C,CAIqB,CAC1B,KAAMC,CAAAA,OAAiC,CAAG,EAA1C,CAEA,GAAIH,GAAG,CAACI,QAAR,CAAkB,CAChB;AACA;AACAD,OAAO,CAACE,IAAR,CACE,iCAAqB,CACnBC,aAAa,CAAEN,GAAG,CAACM,aADA,CAEnBC,WAAW,CAAEP,GAAG,CAACO,WAFE,CAArB,CADF,EAMD,CAED;AACAJ,OAAO,CAACE,IAAR,CAAa,CACXG,MAAM,CAAEC,OAAO,CAACC,OAAR,CAAgB,YAAhB,CADG,CAEXC,OAAO,CAAE,CAAEC,aAAa,CAAE,EAAIV,aAAa,CAACW,MAAnC,CAA2CC,SAAS,CAAE,IAAtD,CAFE,CAAb,EAKA;AACAX,OAAO,CAACE,IAAR,CAAa,CACXG,MAAM,CAAEC,OAAO,CAACC,OAAR,CAAgB,mCAAhB,CADG,CAEXC,OAAO,CAAE,CACPI,KAAK,CAAE,kBADA,CAEPC,OAAO,CAAEf,cAFF,CAGPa,SAAS,CAAE,IAHJ,CAFE,CAAb,EASAX,OAAO,CAACE,IAAR,CACE;AACA;AACA,GAAGH,aAAa,CAACe,KAAd,GAAsBC,OAAtB,EAHL,EAMA,MAAOf,CAAAA,OAAP,CACD","sourcesContent":["import postcss from 'postcss'\nimport webpack from 'webpack'\nimport { ConfigurationContext } from '../../../utils'\nimport { getClientStyleLoader } from './client'\n\nexport function getGlobalCssLoader(\n  ctx: ConfigurationContext,\n  postCssPlugins: readonly postcss.AcceptedPlugin[],\n  preProcessors: readonly webpack.RuleSetUseItem[] = []\n): webpack.RuleSetUseItem[] {\n  const loaders: webpack.RuleSetUseItem[] = []\n\n  if (ctx.isClient) {\n    // Add appropriate development more or production mode style\n    // loader\n    loaders.push(\n      getClientStyleLoader({\n        isDevelopment: ctx.isDevelopment,\n        assetPrefix: ctx.assetPrefix,\n      })\n    )\n  }\n\n  // Resolve CSS `@import`s and `url()`s\n  loaders.push({\n    loader: require.resolve('css-loader'),\n    options: { importLoaders: 1 + preProcessors.length, sourceMap: true },\n  })\n\n  // Compile CSS\n  loaders.push({\n    loader: require.resolve('next/dist/compiled/postcss-loader'),\n    options: {\n      ident: '__nextjs_postcss',\n      plugins: postCssPlugins,\n      sourceMap: true,\n    },\n  })\n\n  loaders.push(\n    // Webpack loaders run like a stack, so we need to reverse the natural\n    // order of preprocessors.\n    ...preProcessors.slice().reverse()\n  )\n\n  return loaders\n}\n"]}